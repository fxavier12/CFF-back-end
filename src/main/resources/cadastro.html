<!DOCTYPE html>
<html>
<head>
	<title>Cadastro</title>
	
	<!-- Biblioteca JUERY-->
	<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.2.0.min.js"></script>
	<!--javascript front end-->
	<script type="text/javascript">

		//ALERT BOX da validacao
		window.onload = function(){
		//ao carregar a pagina esconde o alert
			document.getElementById("alert").style.display = 'none';
						

		}
		//validacao dos campos
		function Validar(){
			//validar nome
			if(document.getElementById("nome").value == null || document.getElementById("nome").value == ""){
				document.getElementById("alert").style.display = 'block';
				document.getElementById("msg-alert").innerHTML = "<p>Preencha o campo nome</b>";
				return false;
			}

			//validar email
			if(document.getElementById("email").value == null || document.getElementById("email").value == ""){
				document.getElementById("alert").style.display = 'block';
				document.getElementById("msg-alert").innerHTML = "<b>Preencha o campo email</b>";

				return false;
			}
			//validar senha
			if(document.getElementById("senha").value == null || document.getElementById("senha").value == ""){
				document.getElementById("alert").style.display = 'block';
				document.getElementById("msg-alert").innerHTML = "<b>Preencha o campo senha</b>";

				return false;
			}


			return true;
		}

		//Requisicao de cadastro
		function Cadastrar(){
			//chama a funcao de validacao
			if(Validar()){
					//valores de input
					var params ={};

					params.nome = document.getElementById("nome").value;
					params.email = document.getElementById("email").value;
					params.senha = document.getElementById("senha").value;
					//params 
					console.log("Enviando requisicao de Cadastro : "+params);

					//requisicao POST
					$.post( "https://cffbackend.herokuapp.com/cadastro", { nome: params.nome, email: params.email , senha: params.senha })
				  		.done(function( data ) {
				   		 	alert( "Sua vconta foi criada : ");
					  	}).fail(function(data) {
		    				document.getElementById("alert").style.display = 'block';
		    				console.log(data.responseJSON.mensagen);
							document.getElementById("msg-alert").innerHTML = data.responseJSON.mensagen;

		  			});
			}
			

	

		}
	</script>	
	<style type="text/css">
					
			html {
			    width:100%;
			    background-color: #A0CCBA;
			    color: #4CFFF9;
			    
			}
			h1{
			    text-align: center;
			    font-size: 60px;

			}


			form {
			    position: relative;
			    display: inline;
			}
			.center{
				background-color: #007F7B;
				width: 80%;
				height: 600px;
				margin:auto;
				padding: 1%;
				margin-top:5%;
				border-radius: 18px ;
				border: 2px #011E7F solid ;

			}

			.login {
			    margin-top: 100px;
			    margin-left: auto;
			    margin-right: auto;
			    vertical-align: center;
			    max-width: 250px;
			    float: center;
			}

			.botao-login{
			    background-color: #00CCC6;
			    border: none;
			    color: white;
			    padding:  15px 28px;
			    text-align: center;
			    text-decoration: none;
			    font-size: 12px;
			    cursor: pointer;
			    border-radius: 4px;
			    margin: auto;
			}

			.alert {
				  background-color: #FF7560;
				  margin-bottom:  10px;
				  padding: 2px;
				  border: 1px #D26135 solid;
				  border-radius: 4px;
			}


			.alert p{
				  font-size: 14px;
				  text-align: center;
				  color: white;
			}

			.closebtn {
				    margin-right: 5px;
				    color: white;
				    font-weight: bold;
				    float: right;
				    font-size: 22px;
				    line-height: 20px;
				    cursor: pointer;
				    transition: 0.3s;
			}
			.formulario {
				  width: 100%;
				  display: block;
			}
			.myinput{
			 		 width: 98%;
			 		 margin: 0;
			}
	</style>

</head>

  
<body >

	<div class="center">
	<h1>Controle Financeiro Facil</h1>

		<div class="login">
			<p>Preencha seus dados abaixo</p>
      <div class="alert" id="alert">
          
          <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
          <p id="msg-alert"></p>
        </div>
      <div>
          	<form class="formulario" onsubmit="return false">
			  Nome:<br>
			  <input class="myinput" type="text" name="nome" value="" id="nome">
			  <br>
			  E-mail:<br>
			  <input class="myinput"  type="email" name="email" value="" id="email">
			  <br>
			  Senha:<br>
			  <input class="myinput"  type="password" name="senha" value="" id="senha">
        
        </br></br>
			  <input type="submit" class="botao-login" onclick="Cadastrar()" value="Cadastrar"></input>
			</form>
      </div>
		
			<p id="demo"></p> 
		</div>

	</div>
	


</body>
</html>
